<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lab01: Research Article Exploration</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      color: #333;
      background-color: #f5f7f9;
    }
    h1, h2, h3 {
      color: #2c3e50;
    }
    .section {
      background-color: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
    }
    textarea {
      height: 100px;
      resize: vertical;
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
      font-size: 16px;
    }
    button:hover {
      background-color: #2980b9;
    }
    .screenshot-container {
      margin-top: 10px;
      border: 2px dashed #ccc;
      padding: 10px;
      text-align: center;
    }
    .screenshot-preview {
      max-width: 100%;
      max-height: 300px;
      margin-top: 10px;
      display: none;
    }
    .system-info {
      font-size: 14px;
      background-color: #f1f1f1;
      padding: 10px;
      border-radius: 4px;
      margin-top: 20px;
    }
    .quiz-container {
      margin-top: 20px;
    }
    .quiz-question {
      margin-bottom: 15px;
    }
    .progress-bar {
      height: 10px;
      background-color: #e0e0e0;
      border-radius: 5px;
      margin-bottom: 20px;
    }
    .progress {
      height: 100%;
      background-color: #3498db;
      border-radius: 5px;
      width: 0%;
      transition: width 0.3s;
    }
    .submit-btn {
      background-color: #27ae60;
      font-size: 18px;
      padding: 12px 20px;
    }
    .submit-btn:hover {
      background-color: #219955;
    }
    .timer {
      font-size: 18px;
      text-align: right;
      color: #e74c3c;
      font-weight: bold;
    }
    .alert {
      padding: 10px;
      background-color: #f8d7da;
      color: #721c24;
      border-radius: 4px;
      margin-bottom: 10px;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Lab 01: Research Article Exploration</h1>
  
  <!-- Student Information Section -->
  <div class="section">
    <h2>Student Information</h2>
    <label for="studentName">Student's Name:</label>
    <input type="text" id="studentName" placeholder="Enter your name">
    <label for="studentID">Student ID:</label>
    <input type="text" id="studentID" placeholder="Enter your student ID">
  </div>
  
  <p>Complete all sections below. Your responses and time spent will be recorded.</p>
  
  <div class="system-info" id="systemInfo">
    <strong>System Information:</strong> <span id="browserInfo"></span><br>
    <strong>Date and Time:</strong> <span id="currentTime"></span><br>
    <strong>Time Spent:</strong> <span id="timeSpent">00:00:00</span>
  </div>
  
  <div class="progress-bar">
    <div class="progress" id="progressBar"></div>
  </div>
  
  <div class="alert" id="pasteAlert">Paste action detected! Please type your response manually.</div>
  
  <div class="section">
    <h2>1. Google Scholar Search</h2>
    
    <label for="iotPaper">Title and link of one recent paper on "IoT security":</label>
    <input type="text" id="iotPaper" class="no-paste" placeholder="Enter paper title and link">
    
    <label for="cloudPaper">Title and link of one recent paper on "Cloud security":</label>
    <input type="text" id="cloudPaper" class="no-paste" placeholder="Enter paper title and link">
    
    <label for="apaCitation">Copy the APA citation of your chosen papers from Google Scholar:</label>
    <textarea id="apaCitation" placeholder="Paste APA citation here"></textarea>
    
    <div class="screenshot-container">
      <p>Upload screenshot of your Google Scholar search results</p>
      <input type="file" id="scholarScreenshot" accept="image/*">
      <img id="scholarPreview" class="screenshot-preview">
    </div>
  </div>
  
  <div class="section">
    <h2>2. Database Exploration</h2>
    
    <label for="publishers">Name of at least five publishers (Elsevier, IEEE, Springer, Wiley, etc.):</label>
    <input type="text" id="publishers" class="no-paste" placeholder="Enter publisher names separated by commas">
    
    <div id="paperLinksContainer">
      <label for="paperLink1">Title and link of paper from publisher 1:</label>
      <input type="text" id="paperLink1" class="no-paste paper-link" placeholder="Enter paper title and link">
      
      <label for="paperLink2">Title and link of paper from publisher 2:</label>
      <input type="text" id="paperLink2" class="no-paste paper-link" placeholder="Enter paper title and link">
      
      <label for="paperLink3">Title and link of paper from publisher 3:</label>
      <input type="text" id="paperLink3" class="no-paste paper-link" placeholder="Enter paper title and link">
      
      <label for="paperLink4">Title and link of paper from publisher 4:</label>
      <input type="text" id="paperLink4" class="no-paste paper-link" placeholder="Enter paper title and link">
      
      <label for="paperLink5">Title and link of paper from publisher 5:</label>
      <input type="text" id="paperLink5" class="no-paste paper-link" placeholder="Enter paper title and link">
    </div>
    
    <label for="journalCitation">Copy the APA citation of one paper from the journal page:</label>
    <textarea id="journalCitation" placeholder="Paste APA citation here"></textarea>
    
    <div class="screenshot-container">
      <p>Upload screenshot of one of the database search results</p>
      <input type="file" id="databaseScreenshot" accept="image/*">
      <img id="databasePreview" class="screenshot-preview">
    </div>
  </div>
  
  <div class="section">
    <h2>3. Open Access vs. Non-Open Access</h2>
    
    <label for="openAccessPaper">Identify an open access paper from your search:</label>
    <input type="text" id="openAccessPaper" class="no-paste" placeholder="Enter paper title and link">
    
    <label for="nonOpenAccessPaper">Identify a non-open access paper from your search:</label>
    <input type="text" id="nonOpenAccessPaper" class="no-paste" placeholder="Enter paper title and link">
    
    <label for="accessStatus">Describe how you identified their access status:</label>
    <textarea id="accessStatus" class="no-paste" placeholder="Explain how you determined which papers were open access and which were not"></textarea>
    
    <div class="screenshot-container">
      <p>Upload screenshot showing evidence of access status</p>
      <input type="file" id="accessScreenshot" accept="image/*">
      <img id="accessPreview" class="screenshot-preview">
    </div>
  </div>
  
  <div class="section">
    <h2>4. Advanced Search</h2>
    
    <label for="advancedSearch">Describe your experience using the advanced search on Google Scholar and one academic database:</label>
    <textarea id="advancedSearch" class="no-paste" placeholder="Describe the advanced search features you used and your experience"></textarea>
    
    <label for="searchCriteria">Advanced search criteria you used:</label>
    <textarea id="searchCriteria" class="no-paste" placeholder="List the specific search criteria, filters, or parameters you applied"></textarea>
    
    <label for="searchResults">Summary of your advanced search results:</label>
    <textarea id="searchResults" class="no-paste" placeholder="Summarize what you found using advanced search"></textarea>
    
    <div class="screenshot-container">
      <p>Upload screenshot of your advanced search interface and results</p>
      <input type="file" id="advancedScreenshot" accept="image/*">
      <img id="advancedPreview" class="screenshot-preview">
    </div>
  </div>
  
  <div class="section">
    <h2>5. Educational Quiz</h2>
    
    <div class="quiz-container">
      <div class="quiz-question">
        <p><strong>1. Which of the following is NOT typically a feature of advanced search in academic databases?</strong></p>
        <label><input type="radio" name="q1" value="a"> a) Filtering by date range</label><br>
        <label><input type="radio" name="q1" value="b"> b) Limiting to peer-reviewed articles</label><br>
        <label><input type="radio" name="q1" value="c"> c) Automatic citation generation</label><br>
        <label><input type="radio" name="q1" value="d"> d) Boolean operators (AND, OR, NOT)</label>
      </div>
      
      <div class="quiz-question">
        <p><strong>2. Which citation style is most commonly used in the fields of psychology, education, and social sciences?</strong></p>
        <label><input type="radio" name="q2" value="a"> a) MLA</label><br>
        <label><input type="radio" name="q2" value="b"> b) APA</label><br>
        <label><input type="radio" name="q2" value="c"> c) Chicago</label><br>
        <label><input type="radio" name="q2" value="d"> d) IEEE</label>
      </div>
      
      <div class="quiz-question">
        <p><strong>3. What typically indicates that a journal article is "open access"?</strong></p>
        <label><input type="radio" name="q3" value="a"> a) It has a high impact factor</label><br>
        <label><input type="radio" name="q3" value="b"> b) It is available to read without a subscription or payment</label><br>
        <label><input type="radio" name="q3" value="c"> c) It has been peer-reviewed</label><br>
        <label><input type="radio" name="q3" value="d"> d) It was published within the last year</label>
      </div>
      
      <div class="quiz-question">
        <p><strong>4. In Google Scholar, which feature allows you to see how many times a paper has been cited?</strong></p>
        <label><input type="radio" name="q4" value="a"> a) Impact score</label><br>
        <label><input type="radio" name="q4" value="b"> b) Cited by</label><br>
        <label><input type="radio" name="q4" value="c"> c) H-index</label><br>
        <label><input type="radio" name="q4" value="d"> d) Reference count</label>
      </div>
      
      <div class="quiz-question">
        <p><strong>5. Which of the following is a key advantage of using academic databases instead of general web search engines?</strong></p>
        <label><input type="radio" name="q5" value="a"> a) Academic databases are always free to use</label><br>
        <label><input type="radio" name="q5" value="b"> b) Academic databases include only verified, peer-reviewed content</label><br>
        <label><input type="radio" name="q5" value="c"> c) Academic databases provide more entertainment content</label><br>
        <label><input type="radio" name="q5" value="d"> d) Academic databases have fewer search options</label>
      </div>
    </div>
  </div>
  
  <!-- The button now triggers report generation and immediately opens the print dialog -->
  <button class="submit-btn" id="generateReport">Print Assignment</button>
  
  <script>
    // Update system information
    function updateSystemInfo() {
      document.getElementById('browserInfo').textContent =
        navigator.userAgent + ' | ' +
        window.screen.width + 'x' + window.screen.height + ' | ' +
        'Platform: ' + navigator.platform;
      
      const now = new Date();
      document.getElementById('currentTime').textContent = now.toLocaleString();
    }
    
    let startTime = new Date();
    let timerInterval;
    
    function startTimer() {
      timerInterval = setInterval(() => {
        const now = new Date();
        const diff = Math.floor((now - startTime) / 1000);
        const hours = Math.floor(diff / 3600).toString().padStart(2, '0');
        const minutes = Math.floor((diff % 3600) / 60).toString().padStart(2, '0');
        const seconds = (diff % 60).toString().padStart(2, '0');
        document.getElementById('timeSpent').textContent = `${hours}:${minutes}:${seconds}`;
      }, 1000);
    }
    
    // Count total words in text inputs and textareas
    function getTotalWordCount() {
      const textElements = document.querySelectorAll('input[type="text"], textarea');
      let totalWords = 0;
      textElements.forEach(element => {
        totalWords += element.value.split(/\s+/).filter(word => word.length > 0).length;
      });
      return totalWords;
    }
    
    // Prevent paste on specific fields
    document.addEventListener('DOMContentLoaded', () => {
      updateSystemInfo();
      startTimer();
      
      const noPasteFields = document.querySelectorAll('.no-paste');
      noPasteFields.forEach(field => {
        field.addEventListener('paste', (e) => {
          e.preventDefault();
          const alertBox = document.getElementById('pasteAlert');
          alertBox.style.display = 'block';
          setTimeout(() => {
            alertBox.style.display = 'none';
          }, 3000);
        });
      });
      
      // Screenshot preview
      const screenshotInputs = document.querySelectorAll('input[type="file"]');
      screenshotInputs.forEach(input => {
        const previewId = input.id.replace('Screenshot', 'Preview');
        input.addEventListener('change', function() {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
              const preview = document.getElementById(previewId);
              preview.src = e.target.result;
              preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
          }
        });
      });
      
      // Progress tracking: totalFields updated to 27 to include student info fields.
      function updateProgress() {
        const totalFields = 27;
        let filledFields = 0;
        
        // Count filled text inputs and textareas
        const textFields = document.querySelectorAll('input[type="text"], textarea');
        textFields.forEach(field => {
          if (field.value.trim() !== '') {
            filledFields++;
          }
        });
        
        // Count uploaded screenshots
        const fileInputs = document.querySelectorAll('input[type="file"]');
        fileInputs.forEach(input => {
          if (input.files.length > 0) {
            filledFields++;
          }
        });
        
        // Count answered quiz questions
        const quizQuestions = 5;
        for (let i = 1; i <= quizQuestions; i++) {
          const questionName = 'q' + i;
          const answeredQuestion = document.querySelector('input[name="' + questionName + '"]:checked');
          if (answeredQuestion) {
            filledFields++;
          }
        }
        
        const progressPercentage = (filledFields / totalFields) * 100;
        document.getElementById('progressBar').style.width = progressPercentage + '%';
      }
      
      const trackableFields = document.querySelectorAll('input[type="text"], textarea');
      trackableFields.forEach(field => {
        field.addEventListener('input', updateProgress);
      });
      
      const fileInputs = document.querySelectorAll('input[type="file"]');
      fileInputs.forEach(input => {
        input.addEventListener('change', updateProgress);
      });
      
      const radioInputs = document.querySelectorAll('input[type="radio"]');
      radioInputs.forEach(radio => {
        radio.addEventListener('change', updateProgress);
      });
      
      // Print button event
      document.getElementById('generateReport').addEventListener('click', generateReport);
    });
    
    function generateReport() {
      // Check if total word count is at least 20 words
      if (getTotalWordCount() < 20) {
        alert("You must enter at least 20 words in your assignment before generating the report.");
        return;
      }
      
      // Create a report window
      const reportWindow = window.open('', '_blank', 'width=800,height=800');
      
      // Get all form values
      const reportData = {
        studentName: document.getElementById('studentName').value,
        studentID: document.getElementById('studentID').value,
        systemInfo: document.getElementById('browserInfo').textContent,
        currentTime: document.getElementById('currentTime').textContent,
        timeSpent: document.getElementById('timeSpent').textContent,
        
        iotPaper: document.getElementById('iotPaper').value,
        cloudPaper: document.getElementById('cloudPaper').value,
        apaCitation: document.getElementById('apaCitation').value,
        
        publishers: document.getElementById('publishers').value,
        paperLink1: document.getElementById('paperLink1').value,
        paperLink2: document.getElementById('paperLink2').value,
        paperLink3: document.getElementById('paperLink3').value,
        paperLink4: document.getElementById('paperLink4').value,
        paperLink5: document.getElementById('paperLink5').value,
        journalCitation: document.getElementById('journalCitation').value,
        
        openAccessPaper: document.getElementById('openAccessPaper').value,
        nonOpenAccessPaper: document.getElementById('nonOpenAccessPaper').value,
        accessStatus: document.getElementById('accessStatus').value,
        
        advancedSearch: document.getElementById('advancedSearch').value,
        searchCriteria: document.getElementById('searchCriteria').value,
        searchResults: document.getElementById('searchResults').value,
        
        q1: document.querySelector('input[name="q1"]:checked') ? document.querySelector('input[name="q1"]:checked').value : 'Not answered',
        q2: document.querySelector('input[name="q2"]:checked') ? document.querySelector('input[name="q2"]:checked').value : 'Not answered',
        q3: document.querySelector('input[name="q3"]:checked') ? document.querySelector('input[name="q3"]:checked').value : 'Not answered',
        q4: document.querySelector('input[name="q4"]:checked') ? document.querySelector('input[name="q4"]:checked').value : 'Not answered',
        q5: document.querySelector('input[name="q5"]:checked') ? document.querySelector('input[name="q5"]:checked').value : 'Not answered'
      };
      
      // Get screenshots
      const screenshots = {
        scholar: document.getElementById('scholarPreview').src,
        database: document.getElementById('databasePreview').src,
        access: document.getElementById('accessPreview').src,
        advanced: document.getElementById('advancedPreview').src
      };
      
      // Build the HTML for the report, including a pre-filled "Assignment Overview" section.
      let reportHTML = `
        <!DOCTYPE html>
        <html>
        <head>
          <title>Academic Research Assignment Report</title>
          <style>
            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
            .section { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
            h1, h2 { color: #2c3e50; }
            .info-box { background-color: #f8f9fa; padding: 15px; border-radius: 5px; }
            .screenshot { max-width: 100%; margin: 10px 0; border: 1px solid #ddd; }
            .answer { margin-bottom: 10px; }
            .label { font-weight: bold; }
            .quiz-result { margin-top: 20px; }
            .correct { color: green; }
            .incorrect { color: red; }
          </style>
        </head>
        <body>
          <h1>Academic Research Assignment Report</h1>
          <div class="info-box">
            <p><strong>Student Name:</strong> ${reportData.studentName || 'Not provided'}</p>
            <p><strong>Student ID:</strong> ${reportData.studentID || 'Not provided'}</p>
            <p><strong>System Information:</strong> ${reportData.systemInfo}</p>
            <p><strong>Submission Time:</strong> ${reportData.currentTime}</p>
            <p><strong>Time Spent:</strong> ${reportData.timeSpent}</p>
          </div>
          
          <!-- Pre-filled Assignment Overview Section -->
          <div class="section">
            <h2>Assignment Overview</h2>
            <p>
              This assignment requires an exploration of research articles on cybersecurity topics such as IoT security and cloud security.
              Students are expected to perform searches on Google Scholar and academic databases, collect APA citations, and analyze their search strategies.
              The report generated here reflects the student's research process and understanding of the assignment requirements.
            </p>
          </div>
          
          <div class="section">
            <h2>1. Google Scholar Search</h2>
            <div class="answer">
              <p class="label">IoT Security Paper:</p>
              <p>${reportData.iotPaper || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Cloud Security Paper:</p>
              <p>${reportData.cloudPaper || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">APA Citations:</p>
              <p>${reportData.apaCitation || 'Not provided'}</p>
            </div>
            ${screenshots.scholar && screenshots.scholar !== 'data:,' ? 
              `<p class="label">Screenshot:</p><img src="${screenshots.scholar}" class="screenshot" alt="Google Scholar Screenshot">` : 
              '<p>No screenshot provided</p>'}
          </div>
          
          <div class="section">
            <h2>2. Database Exploration</h2>
            <div class="answer">
              <p class="label">Publishers:</p>
              <p>${reportData.publishers || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Papers from Publishers:</p>
              <ol>
                <li>${reportData.paperLink1 || 'Not provided'}</li>
                <li>${reportData.paperLink2 || 'Not provided'}</li>
                <li>${reportData.paperLink3 || 'Not provided'}</li>
                <li>${reportData.paperLink4 || 'Not provided'}</li>
                <li>${reportData.paperLink5 || 'Not provided'}</li>
              </ol>
            </div>
            <div class="answer">
              <p class="label">Journal Citation:</p>
              <p>${reportData.journalCitation || 'Not provided'}</p>
            </div>
            ${screenshots.database && screenshots.database !== 'data:,' ? 
              `<p class="label">Screenshot:</p><img src="${screenshots.database}" class="screenshot" alt="Database Screenshot">` : 
              '<p>No screenshot provided</p>'}
          </div>
          
          <div class="section">
            <h2>3. Open Access vs. Non-Open Access</h2>
            <div class="answer">
              <p class="label">Open Access Paper:</p>
              <p>${reportData.openAccessPaper || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Non-Open Access Paper:</p>
              <p>${reportData.nonOpenAccessPaper || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Identification Method:</p>
              <p>${reportData.accessStatus || 'Not provided'}</p>
            </div>
            ${screenshots.access && screenshots.access !== 'data:,' ? 
              `<p class="label">Screenshot:</p><img src="${screenshots.access}" class="screenshot" alt="Access Status Screenshot">` : 
              '<p>No screenshot provided</p>'}
          </div>
          
          <div class="section">
            <h2>4. Advanced Search</h2>
            <div class="answer">
              <p class="label">Experience Description:</p>
              <p>${reportData.advancedSearch || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Search Criteria:</p>
              <p>${reportData.searchCriteria || 'Not provided'}</p>
            </div>
            <div class="answer">
              <p class="label">Search Results:</p>
              <p>${reportData.searchResults || 'Not provided'}</p>
            </div>
            ${screenshots.advanced && screenshots.advanced !== 'data:,' ? 
              `<p class="label">Screenshot:</p><img src="${screenshots.advanced}" class="screenshot" alt="Advanced Search Screenshot">` : 
              '<p>No screenshot provided</p>'}
          </div>
          
          <div class="section">
            <h2>5. Educational Quiz Results</h2>
            <div class="quiz-result">
              <p><strong>Question 1:</strong> ${reportData.q1}</p>
              <p><strong>Question 2:</strong> ${reportData.q2}</p>
              <p><strong>Question 3:</strong> ${reportData.q3}</p>
              <p><strong>Question 4:</strong> ${reportData.q4}</p>
              <p><strong>Question 5:</strong> ${reportData.q5}</p>
              <p><strong>Answer Key:</strong></p>
              <p class="${reportData.q1 === 'c' ? 'correct' : 'incorrect'}">1. c) Automatic citation generation</p>
              <p class="${reportData.q2 === 'b' ? 'correct' : 'incorrect'}">2. b) APA</p>
              <p class="${reportData.q3 === 'b' ? 'correct' : 'incorrect'}">3. b) It is available to read without a subscription or payment</p>
              <p class="${reportData.q4 === 'b' ? 'correct' : 'incorrect'}">4. b) Cited by</p>
              <p class="${reportData.q5 === 'b' ? 'correct' : 'incorrect'}">5. b) Academic databases include only verified, peer-reviewed content</p>
            </div>
          </div>
          
          <div class="info-box">
            <p><strong>Report generated on:</strong> ${new Date().toLocaleString()}</p>
            <p>This report contains the student's submissions for the Academic Research Assignment.</p>
          </div>
        </body>
        </html>
      `;
      
      reportWindow.document.write(reportHTML);
      reportWindow.document.close();
      reportWindow.print();
    }
  </script>
</body>
</html>
